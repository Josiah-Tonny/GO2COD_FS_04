{"ast":null,"code":"// components/common/PrivateRoute.js\nimport React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";const PrivateRoute=_ref=>{var _authState$user;let{children}=_ref;const{authState}=useAuth();const location=useLocation();// Add loading state\nif(authState.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"})});}if(!authState.isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}// Role-based access control\nif(((_authState$user=authState.user)===null||_authState$user===void 0?void 0:_authState$user.role)!=='admin'){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true,state:{error:\"You don't have permission to access this page\"}});}return children;};export default PrivateRoute;","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsx","_jsx","PrivateRoute","_ref","_authState$user","children","authState","location","loading","className","isAuthenticated","to","state","from","replace","user","role","error"],"sources":["C:/Users/Administrator/portfolio-cms/frontend/src/components/common/PrivateRoute.js"],"sourcesContent":["// components/common/PrivateRoute.js\r\nimport React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst PrivateRoute = ({ children }) => {\r\n  const { authState } = useAuth();\r\n  const location = useLocation();\r\n\r\n  // Add loading state\r\n  if (authState.loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!authState.isAuthenticated) {\r\n    return (\r\n      <Navigate \r\n        to=\"/login\" \r\n        state={{ from: location }} \r\n        replace \r\n      />\r\n    );\r\n  }\r\n\r\n  // Role-based access control\r\n  if (authState.user?.role !== 'admin') {\r\n    return (\r\n      <Navigate \r\n        to=\"/\" \r\n        replace \r\n        state={{ \r\n          error: \"You don't have permission to access this page\" \r\n        }} \r\n      />\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default PrivateRoute;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,OAAO,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAkB,KAAAC,eAAA,IAAjB,CAAEC,QAAS,CAAC,CAAAF,IAAA,CAChC,KAAM,CAAEG,SAAU,CAAC,CAAGP,OAAO,CAAC,CAAC,CAC/B,KAAM,CAAAQ,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9B;AACA,GAAIQ,SAAS,CAACE,OAAO,CAAE,CACrB,mBACEP,IAAA,QAAKQ,SAAS,CAAC,+CAA+C,CAAAJ,QAAA,cAC5DJ,IAAA,QAAKQ,SAAS,CAAC,gEAAgE,CAAM,CAAC,CACnF,CAAC,CAEV,CAEA,GAAI,CAACH,SAAS,CAACI,eAAe,CAAE,CAC9B,mBACET,IAAA,CAACJ,QAAQ,EACPc,EAAE,CAAC,QAAQ,CACXC,KAAK,CAAE,CAAEC,IAAI,CAAEN,QAAS,CAAE,CAC1BO,OAAO,MACR,CAAC,CAEN,CAEA;AACA,GAAI,EAAAV,eAAA,CAAAE,SAAS,CAACS,IAAI,UAAAX,eAAA,iBAAdA,eAAA,CAAgBY,IAAI,IAAK,OAAO,CAAE,CACpC,mBACEf,IAAA,CAACJ,QAAQ,EACPc,EAAE,CAAC,GAAG,CACNG,OAAO,MACPF,KAAK,CAAE,CACLK,KAAK,CAAE,+CACT,CAAE,CACH,CAAC,CAEN,CAEA,MAAO,CAAAZ,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAH,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}